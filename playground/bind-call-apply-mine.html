<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Bind Call and Apply!</title>
  <link rel="stylesheet" href="../base.css">
</head>

<body>
  <p>Hello</p>
  <button>Click me</button>

  <script>
  const person = {
    name: 'Mark Phoenix',
    sayHi() {
      console.log(this);
      // console.log(`Hey ${this.name}`);
      return `Hey ${this.name}`;
    },
  };

  const kate = { name: 'Kate' };
  // Binding variable to an object so you can use sayHI() on it
  // const sayHi = person.sayHi.bind(person);
  // const sayHi = person.sayHi.bind({ name: 'Hamish' });
  const sayHi = person.sayHi.bind(kate);

  //* Query selector example
  // Below won't work as querySelector has no this
  // const $ = document.querySelector;
  // const para = $('p');

  // By calling bind against querySelector, we say when the $ function is run, use `document` as the `this` value.
  const $ = document.querySelector.bind(document);
  console.log($('p'));

// Use to include arguments in a method
  const bill = {
    total: 1000,
    calculate(taxrate) {
      console.log(this);
      return this.total + this.total * taxrate;
    },
  };

  const total = bill.calculate(0.13);
  console.log(total);

  const calc = bill.calculate.bind(bill);
  // Bind can take arguments after this object is passed. First argument is this object, other arguments can follow. Useful if you have data available when the function is created you can include it here so it's available pre-loaded to call later on
  const calcTwo = bill.calculate.bind({ total: 5000 }, 0.25);
  console.log(calc(0.13));
  console.log(calcTwo());
  </script>
</body>

</html>
