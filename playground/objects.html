<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title></title>
    <link rel="stylesheet" href="../base.css" />
  </head>

  <body>
    <!-- <input type="text" name="first" value="Mark" /> -->

    <!-- Using lodash utility library  -->
    <script src="https://unpkg.com/lodash"></script>
    <script>
      // Object literal syntax
      const age = 100;

      const person = {
        name: 'Mark',
        age,
        'cool-dude': true,
        'very cool': false,
        propertyToCheck: 'Never',
        '777': true,
        dog: 'Dug',
        // Nested object
        clothing: {
          shirts: 10,
          trousers: 4,
        },
        // Simplified method syntax
        sayHello(greeting = 'Hello') {
          return `${greeting} ${this.name}`;
        },
        // This doesn't get scoped to object with arrow functions
        sneeze: () => `${this} Achoo`,
      };

      person.job = 'Web Developer';
      person.age = 50;
      person.address = { city: 'Cheltenham', county: 'Gloucestershire' };

      // console.log('person', person);

      // Bracket notation
      // console.log(person.age);
      // const propertyToCheck = prompt('What do you want to check?');
      // console.log(person['cool-dude']);
      // console.log(person[propertyToCheck]);

      // Checking if property exists
      // Before getting nested property
      // console.log(person.jobs ? person.jobs.side : 'No more jobs!');

      // Check if input property exists
      const nameInput = document.querySelector('[name="first"]');
      const name = nameInput ? nameInput.value : 'No name';
      // console.log('Name -', name);

      // Deleting properties
      // Delete returns true when it runs
      const deleted = delete person.job;
      // console.log('Deleted?', deleted);

      // References vs Values

      // Variables update like Dan Ambramov says.
      let name1 = 'Mark';
      let name2 = 'Mark';
      name1 = 'Kate';
      name1 = name2;
      name2 = name1;

      console.log(name1 === name2);
      name2 = 'Dug';

      const person1 = {
        first: 'Mark',
        last: 'Phoenix',
        clothing: { hats: 10, shoes: 100 },
      };

      const person2 = {
        first: 'Mark',
        last: 'Phoenix',
      };

      // This doesn't create a new object, it just points one variable to another.
      // const person3 = person1;
      // So changing properties on person3 also alters properties on person one as they're the same object.
      // person3.first = 'Phil';
      // console.log(person3.first);
      // console.log(person1.first);

      // Copy an object using spread
      // const person3 = { ...person1 };
      // person3.first = 'Steven';

      // Spread copying (and Object.assign()) only works one level deep (shallow copying). Nested objects are still changed
      // person3.clothing.hats = 100;

      // Use Lodash utility library
      const person3 = _.cloneDeep(person1);
      person3.clothing.hats = 100;

      // Copy object an old fashioned way.
      const person4 = Object.assign({}, person1);

      // Merging objects

      const meatInventory = {
        bacon: 2,
        sausage: 3,
        oyster: 10,
      };

      const veggieInventory = {
        lettuce: 5,
        tomatoes: 3,
        // Duplicated properties will be overwritten
        oyster: 15,
      };

      const inventory = {
        ...meatInventory,
        ...veggieInventory,
      };

      // / Changing reference also is a factor in functions

      function doStuff(data) {
        data = 'something else';
        console.log(data);
      }

      // works as expected
      doStuff(name1);

      // Below modifies external object
      function doStuff2(data) {
        data.tomatoes = '1000000';
        console.log(data);
      }

      doStuff2(inventory);

      // const sherlock = {
      // Just Javascript
      //   surname: 'Holmes',
      //   address: { city: 'London' },
      // };

      // const john = {
      //   surname: 'Watson',
      //   address: sherlock.address,
      // };

      // john.surname = 'Lennon';
      // john.address.city = 'Malibu';

      // console.log(sherlock.surname); // ?
      // console.log(sherlock.address.city); // ?
      // console.log(john.surname); // ?
      // console.log(john.address.city); // ?

      // const sherlock = { surname: 'Holmes', age: 64 };
      // const propertyName = prompt('What do you want to know?');
      // Read property by its nam
      // alert(sherlock[propertyName]);

      // Methods

      /*
      const age = 100;
      const wes = {
        age,
        name: 'wes',
        properyToCheck: 'NEVER',
        'cool-dude': true,
        'really cool': false,
        '777': true,
        dog: 'snicker',
        clothing: {
          shirts: 10,
          pants: 2,
        },
        sayHello(greeting = 'Hey') {
          return `${greeting} ${this.name}`;
        },
      };

      wes.job = 'Web Developer';
      wes.age = 50;

      console.log(wes.age);
      // const properyToCheck = prompt('What do you want to check?');
      // console.log(properyToCheck);
      // console.log(wes[properyToCheck]);

      const nameInput = document.querySelector('[name="first"]');
      const name = nameInput ? nameInput.value : '';
      console.log(name);

      // console.log(delete wes.job);
      // wes.age = undefined;
      // wes.age = null;

      let name1 = 'wes';
      let name2 = 'wes';

      console.log(name1 === name2);
      name1 = 'scott';
      console.log(name1 === name2);
      // update name1 to be what is name2
      name1 = name2;
      console.log(name1 === name2);
      name2 = name1;
      name2 = 'westopher';

      const person1 = {
        first: 'wes',
        last: 'bos',
        clothing: {
          shirts: 10,
          pants: 2,
        },
      };
      const person2 = {
        first: 'wes',
        last: 'bos',
      };

      // const person3 = person1;
      // person3.first = 'Larry';
      // console.log(person3.first);
      // console.log(person1.first);
      // const person3 = { ...person1 };
      const person3 = _.cloneDeep(person1);
      person3.first = 'Larry';

      person3.clothing.shirts = 100;

      const meatInventory = {
        bacon: 2,
        sausage: 3,
        oyster: 10,
      };

      const veggieInventory = {
        lettuce: 5,
        tomatoes: 3,
        oyster: 15,
      };

      const inventory = {
        ...meatInventory,
        ...veggieInventory,
      };

      function doStuff(data) {
        data = 'something else';
        console.log(data);
      }

      function doStuff2(data) {
        data.tomatoes = 10000000000;
        console.log(data);
      }

      doStuff2(inventory);
      */
    </script>
  </body>
</html>
